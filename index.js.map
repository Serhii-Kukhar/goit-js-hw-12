{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from 'axios';\n\n\nconst API_KEY ='48800941-5fb7e609fca175f45db8152fa';\nconst instance = axios.create({\n    baseURL: 'https://pixabay.com/api/',\n});\n\n\nexport async function searchImage(searchimage,page = 1,perPage = 40) {\n    try {\n        const res = await instance\n        .get('', { \n            params: { \n                key: API_KEY,\n                q: searchimage,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: 'true',\n                page,\n                per_page: perPage\n            } \n        });\n        \n        if (res.data.hits.length === 0) {\n                throw new Error('No images found');  \n            }\n            return res.data;\n    }catch(error) {\n            console.error('API Error:', error);\n            throw error; \n        } \n        \n}\n\n","\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const refs = {\n    formEl: document.querySelector('.js-image-form'),\n    imageEl: document.querySelector('.js-image-container'),\n    loadMoreBtn: document.querySelector('.js-load-button'),\n    loaderEl: document.querySelector('.loader'),\n};\n\nexport function imageTemplate(image) {\n    const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = image;\n    return `\n        <li class=\"gallery-item\">\n            <a href=\"${largeImageURL}\" class=\"gallery-link\">\n                <img class=\"image\" src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-img\" width=\"360\"/>\n            </a>\n            <ul class=\"info-list\">\n                <li class=\"info-item\">\n                    <h4 class=\"info-title\">Likes</h4>\n                    <p class=\"info-descr\">${likes}</p>\n                </li>\n                <li class=\"info-item\">\n                    <h4 class=\"info-title\">Views</h4>\n                    <p class=\"info-descr\">${views}</p>\n                </li>\n                <li class=\"info-item\">\n                    <h4 class=\"info-title\">Comments</h4>\n                    <p class=\"info-descr\">${comments}</p>\n                </li>\n                <li class=\"info-item\">\n                    <h4 class=\"info-title\">Downloads</h4>\n                    <p class=\"info-descr\">${downloads}</p>\n                </li>\n            </ul>\n        </li>\n    `;\n}\n\nexport function imagesTemplate(images) {\n    return images.map(imageTemplate).join('');\n}\n\nexport function renderImages(images) {\n    const markup = imagesTemplate(images);\n    refs.imageEl.insertAdjacentHTML('beforeend', markup); \n    \n    const lightbox = new SimpleLightbox('.gallery-link', {\n        captionsData: 'alt',\n        captionDelay: 250,\n        \n    });\n    lightbox.refresh();\n}\n\n\nexport function scrollNewImages() {\n\n    const form = document.querySelector('.gallery-item')\n    if (form) {\n        const itemHeight = form.getBoundingClientRect().height; \n        window.scrollBy({\n            top: itemHeight * 2.2, \n            behavior: 'smooth',\n        });\n    }\n}\n","\nimport { searchImage } from './js/pixabay-api';\nimport { renderImages,scrollNewImages, refs } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// iziToast message\nfunction showMessageInfo() {\n    iziToast.show({\n        title: 'Info!',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        color: 'blue',\n        position: 'topRight',\n        timeout: 3000,\n        maxWidth: 300,\n        progressBar: true,\n        close: true,\n        transitionIn: 'bounceInLeft',\n        transitionOut: 'fadeOutRight'   \n    });\n}\nfunction showMessageWarning() {\n    iziToast.show({\n        title: 'Warning!',\n        message: 'Please enter a search query.',\n        color: 'yellow',\n        position: 'topRight',\n        timeout: 3000,\n        progressBar: true,\n        close: true,\n        transitionIn: 'bounceInLeft',\n        transitionOut: 'fadeOutRight'\n    });\n}\nfunction showMessageError() {\n    iziToast.show({\n        title: 'Error!',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        color: 'red',\n        position: 'topRight',\n        timeout: 3000,\n        maxWidth: 300,\n        progressBar: true,\n        close: true,\n        transitionIn: 'bounceInLeft',\n        transitionOut: 'fadeOutRight'   \n        \n    });\n}\n\n\n\nlet searchQuery = '';\nlet page = 1;\nconst perPage = 40;\nlet totalHits = 0;\n\n\n\nrefs.formEl.addEventListener('submit', async event => {\n    event.preventDefault();\n\n    \n\n    const newQuery = event.target.elements.query.value.trim(); \n\n    if (newQuery === '') {\n        showMessageWarning ();\n        return;\n        \n    }\n\nif (newQuery !== searchQuery){\n    searchQuery = newQuery;\n    page = 1;\n    refs.imageEl.innerHTML = '';\n    totalHits = 0;\n}\n    refs.loaderEl.style.display = 'block';\n    event.target.elements.query.value = '';\n\n    try{\n        const data = await searchImage(searchQuery,page,perPage);\n        totalHits = data.totalHits;\n            \n        if (data.hits.length > 0) {\n            renderImages(data.hits);\n            refs.loadMoreBtn.style.display = 'block';\n        }else {\n            refs.loadMoreBtn.style.display = 'none';\n        }\n\n\n        if (page * perPage >= totalHits){\n            refs.loadMoreBtn.style.display = 'none';\n            showMessageInfo();\n\n        }\n    } catch (error) {\n        refs.loadMoreBtn.style.display = 'none';\n        showMessageError ();\n        } finally {\n            refs.loaderEl.style.display = 'none'; \n        }\n\n\n    event.target.reset();\n\n});\n\n\n\n\nrefs.loadMoreBtn.addEventListener('click', async () => {\n    page += 1;\n    refs.loaderEl.style.display = 'block';\n    try {\n        const data = await searchImage(searchQuery, page, perPage);\n\n        if (data.hits.length > 0) {\n            renderImages(data.hits);\n        }\n\n    \n        if (page * perPage >= totalHits) {\n            refs.loadMoreBtn.style.display = 'none';\n            showMessageInfo ();\n        }\n\n        scrollNewImages();\n\n    } catch (error) {\n        refs.loadMoreBtn.style.display = 'none';\n        showMessageError();\n    } finally {\n        refs.loaderEl.style.display = 'none';\n    }\n});\n\n\n\n\n"],"names":["API_KEY","instance","axios","searchImage","searchimage","page","perPage","res","error","refs","imageTemplate","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesTemplate","images","renderImages","markup","SimpleLightbox","scrollNewImages","form","itemHeight","showMessageInfo","iziToast","showMessageWarning","showMessageError","searchQuery","totalHits","event","newQuery","data"],"mappings":"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"}