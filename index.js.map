{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from 'axios';\n\n\nconst API_KEY ='48800941-5fb7e609fca175f45db8152fa';\nconst instance = axios.create({\n    baseURL: 'https://pixabay.com/api/',\n});\nconst loader = document.querySelector('.loader')\n\nexport async function searchImage(searchimage,page = 1,perPage = 40) {\n    loader.style.display ='block';\n    try {\n        const res = await instance\n        .get('', { \n            params: { \n                key: API_KEY,\n                q: searchimage,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: 'true',\n                page,\n                per_page: perPage\n            } \n        });\n        \n        if (res.data.hits.length === 0) {\n                throw new Error('No images found');  \n            }\n            return res.data;\n    }catch(error) {\n            console.error('API Error:', error);\n            throw error; \n        } finally {\n            loader.style.display = 'none';\n            \n\n        }\n        \n}\n\n","\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const refs = {\n    formEl: document.querySelector('.js-image-form'),\n    imageEl: document.querySelector('.js-image-container'),\n    loadMoreBtn: document.querySelector('.js-load-button'),\n};\n\nexport function imageTemplate(image) {\n    const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = image;\n    return `\n        <li class=\"gallery-item\">\n            <a href=\"${largeImageURL}\" class=\"gallery-link\">\n                <img class=\"image\" src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-img\" width=\"360\"/>\n            </a>\n            <ul class=\"info-list\">\n                <li class=\"info-item\">\n                    <h4 class=\"info-title\">Likes</h4>\n                    <p class=\"info-descr\">${likes}</p>\n                </li>\n                <li class=\"info-item\">\n                    <h4 class=\"info-title\">Views</h4>\n                    <p class=\"info-descr\">${views}</p>\n                </li>\n                <li class=\"info-item\">\n                    <h4 class=\"info-title\">Comments</h4>\n                    <p class=\"info-descr\">${comments}</p>\n                </li>\n                <li class=\"info-item\">\n                    <h4 class=\"info-title\">Downloads</h4>\n                    <p class=\"info-descr\">${downloads}</p>\n                </li>\n            </ul>\n        </li>\n    `;\n}\n\nexport function imagesTemplate(images) {\n    return images.map(imageTemplate).join('');\n}\n\nexport function renderImages(images) {\n    const markup = imagesTemplate(images);\n    refs.imageEl.insertAdjacentHTML('beforeend', markup); \n    \n    const lightbox = new SimpleLightbox('.gallery-link', {\n        captionsData: 'alt',\n        captionDelay: 250,\n        \n    });\n    lightbox.refresh();\n}\n\n\nexport function scrollNewImages() {\n\n    const form = document.querySelector('.gallery-item')\n    if (form) {\n        const itemHeight = form.getBoundingClientRect().height; \n        window.scrollBy({\n            top: itemHeight * 2.2, \n            behavior: 'smooth',\n        });\n    }\n}\n","\nimport { searchImage } from './js/pixabay-api';\nimport { renderImages,scrollNewImages, refs } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet searchQuery = '';\nlet page = 1;\nconst perPage = 40;\nlet totalHits = 0;\n\n\n\n\n\nrefs.formEl.addEventListener('submit', async event => {\n    event.preventDefault();\n\n    \n\n    const newQuery = event.target.elements.query.value.trim(); \n\n\n\n    if (newQuery === '') {\n        iziToast.show({\n            title: 'Warning!',\n            message: 'Please enter a search query.',\n            color: 'yellow',\n            position: 'topRight',\n            timeout: 3000,\n            progressBar: true,\n            close: true,\n            transitionIn: 'bounceInLeft',\n            transitionOut: 'fadeOutRight'\n        });\n        return;\n        \n    }\n\nif (newQuery !== searchQuery){\n    searchQuery = newQuery;\n    page = 1;\n    refs.imageEl.innerHTML = '';\n    totalHits = 0;\n}\n    \n\n    event.target.elements.query.value = '';\n\n    try{\n        const data = await searchImage(searchQuery,page,perPage);\n        totalHits = data.totalHits;\n            \n        if (data.hits.length > 0) {\n            renderImages(data.hits);\n            refs.loadMoreBtn.style.display = 'block';\n        }else {\n            refs.loadMoreBtn.style.display = 'none';\n        }\n\n\n        if (page * perPage >= totalHits){\n            refs.loadMoreBtn.style.display = 'none';\n            iziToast.show({\n                title: 'Info!',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                color: 'blue',\n                position: 'topRight',\n                timeout: 3000,\n                maxWidth: 300,\n                progressBar: true,\n                close: true,\n                transitionIn: 'bounceInLeft',\n                transitionOut: 'fadeOutRight'   \n                \n            });\n\n        }\n    } catch (error) {\n            \n            iziToast.show({\n                title: 'Error!',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                color: 'red',\n                position: 'topRight',\n                timeout: 3000,\n                maxWidth: 300,\n                progressBar: true,\n                close: true,\n                transitionIn: 'bounceInLeft',\n                transitionOut: 'fadeOutRight'   \n                \n            });\n\n        }\n        \n});\n\n\n\n\nrefs.loadMoreBtn.addEventListener('click', async () => {\n    page += 1;\n\n\n    try {\n        const data = await searchImage(searchQuery, page, perPage);\n\n        if (data.hits.length > 0) {\n            renderImages(data.hits);\n        }\n\n    \n        if (page * perPage >= totalHits) {\n            refs.loadMoreBtn.style.display = 'none';\n            iziToast.show({\n                title: 'Info!',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                color: 'blue',\n                position: 'topRight',\n                timeout: 3000,\n                maxWidth: 300,\n                progressBar: true,\n                close: true,\n                transitionIn: 'bounceInLeft',\n                transitionOut: 'fadeOutRight'   \n                \n            });\n        }\n\n        scrollNewImages();\n\n    } catch (error) {\n        iziToast.show({\n            title: 'Error!',\n            message: 'Something went wrong!',\n            color: 'red',\n            position: 'topRight',\n            timeout: 3000\n        });\n    }\n});\n\n\n\n\n\n\n"],"names":["API_KEY","instance","axios","loader","searchImage","searchimage","page","perPage","res","error","refs","imageTemplate","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesTemplate","images","renderImages","markup","SimpleLightbox","scrollNewImages","form","itemHeight","searchQuery","totalHits","event","newQuery","iziToast","data"],"mappings":"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"}